{"version":3,"sources":["../../../server/api-utils/index.ts"],"names":["IncomingMessage","BaseNextRequest","NextApiRequest","NextApiResponse","getCookieParser","headers","parseCookie","header","cookie","parse","parseCookieFn","require","Array","isArray","join","sendStatusCode","res","statusCode","redirect","statusOrUrl","url","Error","writeHead","Location","write","end","PRERENDER_REVALIDATE_HEADER","checkIsManualRevalidate","req","previewProps","previewModeId","COOKIE_NAME_PRERENDER_BYPASS","COOKIE_NAME_PRERENDER_DATA","SYMBOL_PREVIEW_DATA","Symbol","SYMBOL_CLEARED_COOKIES","clearPreviewData","serialize","previous","getHeader","setHeader","expires","Date","httpOnly","sameSite","process","env","NODE_ENV","secure","path","Object","defineProperty","value","enumerable","ApiError","constructor","message","sendError","statusMessage","setLazyProp","prop","getter","opts","configurable","optsReset","writable","get","set"],"mappings":"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"}